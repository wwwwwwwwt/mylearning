<!--
 * @Author: zzzzztw
 * @Date: 2023-05-08 16:52:31
 * @LastEditors: Do not edit
 * @LastEditTime: 2023-05-08 18:50:07
 * @FilePath: /myLearning/mysql45/19为什么只查一行的语句也执行很慢.md
-->
# 为什么只查询一条语句也会执行很慢

### 执行不返回的情况：

1. 执行语句长时间不返回：多半是表被其他语句锁死了，例如表级锁MDL锁，加了写锁在等着改表的结构：解决方式，找到持有写锁的语句，kill掉
2. 等待线程flush，flush线程被阻塞住，导致查询语句阻塞：解决方法：找到阻塞flush线程的语句kill掉
3. 到了innodb引擎中，被行级锁阻塞：比如有一个事务在持有写锁，而你的语句想加读锁，这是就会被阻塞住

### 执行查询语句慢的情况：

在可重复读隔离条件下，另一个操作对这个数据操作了次数很多，导致undo log版本链太长，需要回滚太久，所以执行很慢，解决方法，加上in shared mode 加读锁，变为当前读，即读出最新数据，这也提醒了，不要使用长事务